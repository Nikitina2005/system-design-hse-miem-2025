# Второе домашнее задание

1. Взять ФТ и НФТ из HW_1
2. Подумать какие сервисы будут и какие интеграции между ними лучше сделать
3. Выбрать способ взаимодействия между сервисами, написать обоснование
4. Сделать верхнеуровневую схему HLD: описать клиента, сервисы, интеграции

Выполнено аналогично приведенному примеру в задании.

## Функциональные требования

Оформлены в виде User Story
1. Как пользователь системы оповещения о неполадках (сотрудник магазина / администратор колл-центра / покупатель), я хочу иметь возможность создать заявку на устранение неполадок, чтобы моя проблема была рассмотрена ИТ-консультантом, в том числе приложив необходимые фотографии или документы.
2. Как пользователь, создающий заявку, я хочу, чтобы заявка была направлена подходящему ИТ-консультанту так, чтобы были учтены географическая и временная доступности консультанта, а также его квалификация, чтобы возникшая проблема как можно быстрее была устранена.
3. Как пользователь системы, я хочу иметь возможность оценить работу консультанта и системы после решения проблемы, так как заинтересован в улучшении качества обслуживания.
4. Как сотрудник компании, я хочу собирать оценки скорости, качества и общего впечатления (по шкале от 1 до 5) работы ИТ-консультантов, чтобы впоследствии анализировать их производительность.
5. Как ИТ-консультант, я хочу видеть историю выполненных работ по предыдущим заявкам клиента, чтобы анализировать и учитывать предыдущие обращения клиента при новых заявках.

## Нефункциональные требования

1. Производительность: система должна обрабатывать до 10000 пользователей одновременно без снижения времени отклика более чем до 1 секунды для 95% запросов.
2. Масштабируемость: система должна позволять масштабирование в географии (подключение новых магазинов по всей территории страны) и количестве пользователей без остановки работы всей системы.
3. Отказоустойчивость: система должна иметь возможность автоматического переключения на зеркальные серверы в случае сбоя.
4. Безопасность: все данные (заявки, пользовательские данные, оценки) должны передаваться и храниться в зашифрованном виде, должна быть обязательная аутентификация и авторизация для консультантов, сотрудников магазина и остальных пользователей системы, при обработке персональных данных клиентов должна соблюдаться информационная безопасность, в том числе по защите данных от утечек.
5. Мониторинг: система должна предоставлять централизованный мониторинг и логирование событий, чтобы обеспечить быстрое обнаружение и устранение сбоев, анализ причин ошибок и контроль над системой.
6. Регуляторные требования: система должна соответствовать федеральному закону "О персональных данных" от 27.07.2006 N 152-ФЗ по защите персональных данных, включая возможность удаления данных клиента по запросу.
7. Переносимость и совместимость системы: система должна быть совместима с основными браузерами и работать как на ПК, так и на мобильных устройствах.
8. Пользовательский опыт: интерфейсы системы должны быть интуитивно понятными и доступными, с откликом интерфейса не более 1 секунды при взаимодействии, особенно при создании заявки и оценке работы ИТ-консультанта, чтобы обеспечить быструю и удобную подачу заявки.

## Сервисы

1. Сервис авторизации и аутентификации - отличается для консультантов и клиентов;
2. Сервис управления заявками - отвечает за создание заявок, загрузку файлов, чтобы приложить их к заявке, хранит историю заявок;
3. Сервис управления пользователями (как клиентами, так и консультантами) - для консультантов хранит их геолокацию, часы работы, свободен ли консультант, его квалификацию, для клиента - просто геолокацию;
4. Сервис назначения заявок консультантам - выполняет распределение заявок по консультантам с учетом географической и временной доступности консультанта, а также его квалификации;
5. Сервис оценки и отзывов - здесь название говорит само за себя;
6. Сервис уведомлений - уведомления клиенту/консультанту о том, что заявка создана/назначена консультанту/выполняется на определенном этапе/завершена;
7. Сервис мониторинга и логирования - для контроля над системой.

## Интеграции

1. Сервис авторизации и остальные сервисы: синхронная, для проверки прав доступа и идентификации пользователя (клиент или консультант), реализация через API-шлюз (API Gateway), технологии: HTTP, JWT;
2. Сервис управления заявками и сервис назначения заявок консультантам: синхронная,	при создании новой заявки она передается в сервис для поиска консультанта, реализация через P2P (точка-точка), технология: gRPC;
3. Сервис назначения заявок консультантом и сервис управления пользователями: синхронная, чтобы получить данные о доступных консультантах (геолокация, квалификация, занятость), реализация через P2P (точка-точка), технология: gRPC;
4. Сервис управления заявками и сервис уведомлений: асинхронная, для отправки уведомлений о создании заявки, смене статусов, назначении консультанта, реализация через брокер сообщений, технология: Kafka;
5. Сервис назначения заявок консультантам и сервис уведомлений: асинхронная, для уведомления консультанта о новой заявке, реализация через брокер сообщений, технология: Kafka;
6. Сервис управления заявками и сервис оценки и отзывов: синхронная, для получения информации о завершенной заявке, чтобы можно было оставить отзыв, реализация через P2P (точка-точка), технология: gRPC;
7. Сервис управления пользователями	и сервис оценки и отзывов: синхронная, для соотнесения профиля консультанта с оценкой его работы, реализация через P2P (точка-точка), технология: gRPC;
8. Сервис оценки и отзывов и сервис уведомлений: асинхронная, для уведомления консультанта о получении оценки, реализация через брокер сообщений, технология: Kafka;
9. Все сервисы и сервис мониторинга и логирования: асинхронная, для сбора логов, реализация через брокер сообщений, технология: Kafka.
